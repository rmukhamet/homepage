<!doctype html><html lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Vim help</title><style>html body{font-family:raleway,sans-serif;background-color:#fff}:root{--accent: magenta;--border-width:  5px }</style><link rel=stylesheet href=https://rmukhamet.ru/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script>$(document).on('click',function(){$('.collapse').collapse('hide');})</script><meta name=generator content="Hugo 0.70.0"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-35259440-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-35259440-2');</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Vim help</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Главная</a></li><li><a href=/about/>Обо мне</a></li><li><a href=/quotas/>Цитаты</a></li><li><a href=/vital-maxims/>Принципы</a></li><li><a href=/golang/>Golang Help</a></li><li><a href=/vim/>Vim help</a></li><li><a href=/tags/>Теги</a></li><li><a href=/categories/>Категории</a></li><li><a href=https://github.com/rmukhamet/cv/releases/latest/download/CV_Rafael_Mukhametdzhanov.pdf>CV</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=https://twitter.com/RMukhamet><i class="fa fa-twitter"></i></a></li><li class=navbar-icon><a href=https://github.com/rmukhamet><i class="fa fa-github"></i></a></li><li class=navbar-icon><a href=https://www.instagram.com/rafaelfyaritovich/><i class="fa fa-instagram"></i></a></li><li class=navbar-icon><a href=https://www.facebook.com/rmukhametdzhanov><i class="fa fa-facebook"></i></a></li><li class=navbar-icon><a href=https://www.strava.com/athletes/rmukhamet><i class="fa fa-strava"></i></a></li><li class=navbar-icon><a href=https://www.linkedin.com/in/rafaelmoukhametdjanov/><i class="fa fa-linkedin"></i></a></li><li class=navbar-icon><a href=https://t.me/rmukhamet><i class="fa fa-telegram"></i></a></li><li class=navbar-icon><a href=mailto:rmukhametdzhanov@gmail.com><i class="fa fa-envelope-o"></i></a></li></ul></div></div></nav><main><div><h2>Vim help</h2><h5>vim help</h5></div><div align=start class=content><p><a href=https://youtu.be/E-ZbrtoSuzw>useful video</a></p><p><a href=http://vimcasts.org/>http://vimcasts.org/</a>
<a href=https://scabere.livejournal.com/62886.html>Источник</a></p><h2 id=поиск>Поиск</h2><p><code>/word</code> Искать слово “word” сверху вниз<br><code>?word</code> Искать слово “word” снизу вверх<br><code>/jo[ha]n></code> Искать “john” или “joan”<br><code>/\&lt; the</code> Искать слова, начинающееся на “the”<br><code>/the\></code> Искать слова, заканчивающиеся на “the”<br><code>/\&lt; the\></code> Искать “the” (точное соответствие)<br><code>/\&lt; …. \></code> Искать слова из четырех символов<br><code>/fred\|joe</code> Искать “fred” или “joe”<br><code>/\&lt;\d\d\d\d\></code> Искать 4 цифры подряд<br><code>/^\n\{3}</code> Искать 3 пустые строки<br><code>:bufdo /searchstr/</code> Искать во всех открытых файлах</p><h2 id=удаление>Удаление</h2><p><code>d^</code> Удалить все символы от текущей позиции до начала строки<br><code>d$</code> Удалить все символы от текущей позиции до конца строки<br><code>d/word</code> Удалить всё от текущей позиции до слова &ldquo;word&rdquo;<br><code>dfx</code> Удалить всё от текущей позиции до символа &ldquo;x&rdquo;</p><h2 id=замена>Замена</h2><p><code>:%s/old/new/g</code> Заменить все вхождения “old” на “new”<br><code>:%s/old/new/gw</code> Заменить все вхождения “old” на “new” с запросом подтверждения<br><code>:2,35s/old/new/g</code> Заменить все вхождения “old” на “new” между 2 и 35 строками<br><code>:5,$s/old/new/g</code> Заменить все вхождения “old” на “new” начиная с 5 строки и до конца файла<br><code>:%s/^/hello/g</code> Добавить “hello” в начало каждой строки<br><code>:%s/$/Harry/g</code> Добавить “Harry” в конец каждой строки<br><code>:%s/onward/forward/gi</code> Заменить “onward” на “forward” с учетом регистра<br><code>:%s/ *$//g</code> Убрать все пробелы<br><code>:g/string/d</code> Удалить все строки, содержащие “string”<br><code>:v/string/d</code> Удалить все строки, не содержащие “string”<br><code>:s/Bill/Steve/</code> Заменить первое вхождение “Bill” на “Steve” в текущей строке<br><code>:s/Bill/Steve/g</code> Заменить все вхождения “Bill” на “Steve” в текущей строке<br><code>:%s/\r//g</code> Убрать символ возврата каретки (Такие тексты обычно приходят от windows-пользователей)<br><code>:%s#>[^&lt;]\+>##g</code> Очистить текст от HTML-тегов<br><code>:%s/^\(.*\)\n\1$/\1/</code> Удалить строки, повторяющиеся дважды<br><code>Ctrl+a</code> Увеличить число под курсором на единицу<br><code>Ctrl+x</code> Уменьшить число под курсором на единицу<br><code>ggVGg?</code> Преобразовать текст в Rot13</p><p>Комментарий к замене: &mldr;мне нужно во всем файле совершить замену<br>Abs[ &lsquo;выражение&rsquo; ] -> | &lsquo;выражение&rsquo; |<br>Если при описании разыскиваемой последовательности заключить какое-нибудь выражение в скобки ( ), то Vim поместит его в память под соответствующим номером (первое выражение под номером один, второе — два) и позволит в дальнейшем вызывать командой \x, где x — номер, под которым выражение было помещено в память.<br>Таким образом, нужная команда будет выглядеть примерно так:<br><code>:%s/Abs\[\([^\]]*\)\]/|\1|/g</code><br>Здесь стоит отметить, что для буквального совпадения квадратные скобки предваряются слешами, поскольку являются спецсимволами. Вообще любой спецсимвол, если должен участвовать в поиске, обозначая свое непосредственное значение, предваряется слешем: ^; * и т.д. Сам слеш предваряется также слешем. Выглядит это так: для поиска последовательности &lsquo;\cos&rsquo; надо ввести &lsquo;\cos&rsquo;.<br>&mldr;совершить замену вида<br>&lsquo;Заглавная латинская буква'&lsquo;цифра&rsquo; -> &lsquo;Заглавная латинская буква&rsquo;_&lsquo;цифра&rsquo;<br>Самое тривиальное решение, которое напрашивается — перебрать все комбинации, если их немного. То есть, запустить замену сначала &lsquo;U1&rsquo; -> &lsquo;U_1&rsquo;, потом &lsquo;U2&rsquo; -> &lsquo;U_2&rsquo; и т.п. Понятно, что это не наш метод. Мы вспомним, что есть квадратные скобки. И для того, чтобы найти одну заглавную латинскую букву, достаточно ввести шаблон &lsquo;[A-Z]'. Но и это не предел. Для такого шаблона у Vim есть специальная аббревиатура: &lsquo;\u&rsquo; (от &lsquo;uppercase&rsquo;). Для цифр же есть &lsquo;\d&rsquo; (от &lsquo;digit&rsquo;). Подробнее о таких конструкциях можно почитать по адресу :help pattern.txt. С использованием этих аббревиатур команда для поиска примет вид
<code>:%s/\(\u\)\(\d\)/\1_\2/g</code><br>Тут опять встречается группировка круглыми скобками: она позволяет при поиске поместить найденную букву и цифру в память под соотвествующими номерами, и впоследствии их оттуда извлечь, вызывая командами с теми же номерами: &lsquo;\1&rsquo; вызовет букву, а &lsquo;\2&rsquo; — цифру.</p><h2 id=регистр>Регистр</h2><p><code>Vu</code> Перевести строку в нижний регистр<br><code>VU</code> Перевести строку в верхний регистр<br><code>g~~</code> Инвертировать регистр<br><code>vEU</code> Перевести слово под курсором в верхний регистр<br><code>vE~</code> Инвертировать регистр слова<br><code>ggguG</code> Перевести весь текст в нижний регистр<br><code>:set ignorecase</code> Регистронезависимый поиск<br><code>:set smartcase</code> Игнорировать регистр при поиске, если в искомом выражении нет символов верхнего регистра<br><code>:%s/\&lt;./\u&/g</code> Перевести первую букву каждого слова в верхний регистр<br><code>:%s/\&lt;./\l&/g</code> Перевести первую букву каждого слова в нижний регистр<br><code>:%s/.*/\u&</code> Перевести первую букву первого слова в каждой строке в верхний регистр<br><code>:%s/.*/\l&</code> Перевести первую букву первого слова в каждой строке в нижний регистр</p><h2 id=чтениезапись-файлов>Чтение/запись файлов</h2><p><code>:1,10 w outfile</code> Записать в outfile с первой по десятую строки<br><code>:1,10 w >> outfile</code> Добавить в outfile с первой по десятую строки<br><code>:r infile</code> Вставить содержимое файла infile<br><code>:23r infile</code> Вставить содержимое файла infile после 23 строки</p><h2 id=навигация-по-фс>Навигация по ФС</h2><p><code>:e .</code> Открыть встроенный файл-менеджер<br><code>:Sex</code> Разбить окно и открыть встроенный файл менеджер<br><code>:browse e</code> Графический файл-менеджер<br><code>:ls</code> Список буферов<br><code>:cd ..</code> Перейти в родительскую директорию<br><code>:args</code> Список открытых файлов<br><code>:args *.php</code> Открыть все файлы с расширением *.php<br><code>:grep expression *.php</code> Показать список файлов с расширением php, содержащих в имени expression<br><code>gf</code> Открыть файл с именем, равным слову, находящемуся под курсором</p><h2 id=взаимодействие-с-ос>Взаимодействие с ОС</h2><p><code>:!pwd</code> Выполнить команду pwd и вернуться<br><code>!!pwd</code> Выполнить команду pwd и вставить результат в редактор<br><code>:sh</code> Открыть шелл<br><code>$exit</code> Вернуться в редактор из шелла</p><h2 id=выравнивание>Выравнивание</h2><p><code>:%!fmt</code> Выровнять все строки<br><code>!}fmt</code> Выровнять все строки в текущей позиции<br><code>5!!fmt</code> Выровнять следующие 5 строк</p><h2 id=вкладки>Вкладки</h2><p><code>:tabnew</code> Создать новую вкладку<br><code>gt</code> Перейти на следующую вкладку<br><code>:tabfirst</code> Перейти на первую вкладку<br><code>:tablast</code> Перейти на последнюю вкладку<br><code>:tabm n(position)</code> Изменить порядок вкладок<br><code>:tabdo %s/foo/bar/g</code> Выполнить команду во всех вкладках<br><code>:tab ball</code> Поместить все открытые файлы во вкладки</p><h2 id=разделение-окна>Разделение окна</h2><p>:e filename Редактировать filename в текущем окне
:split filename Разделить окно и открыть filename
ctrl-w + стрелка ВВЕРХ Переместить курсор в верхнее окно
ctrl-w ctrl-w Переместить курсор в следующее окно
ctrl-w ctrl-p Переместить курсор в предыдущее окно(вернуться назад)
ctrl-w ctrl-x Поменять окна местами
ctrl-w_ Максимизировать текущее окно
ctrl-w= Подогнать окна по размеру
10 ctrl-w+ Увеличить текущее окно на 10 строк
:vsplit file Вертикально разделить окно
:sview file Разделить окно и открыть file только для чтения
:hide Закрыть текущее окно
:only Закрыть все окна, кроме текущего
:b 2 Открыть #2 в текущем окне</p><h2 id=автодополнение>Автодополнение</h2><p>Ctrl+n Ctrl+p (в режиме вставки) Дополнить слово
Ctrl+x Ctrl+l Дополнить строку
:set dictionary=dict Установить словарь
Ctrl+x Ctrl+k Дополнение из словаря</p><h2 id=метки>Метки</h2><p>mk Пометить текущую позиция как k
‘k Перейти к метке k
d’k Удалить все до метки k
d’a,’k Удалить все от метки a до метки k</p><h2 id=сокращения>Сокращения</h2><p>:ab mail <a href=mailto:mail@provider.org>mail@provider.org</a> Определить mail как сокращение от <a href=mailto:mail@provider.org>mail@provider.org</a></p><h2 id=отступы>Отступы</h2><p>:set autoindent Включить автоматическую расстановку отступов
:set smartindent Включить “умную” расстановку отступов
:set shiftwidth=4 Установить отступ равный 4 пробелам
ctrl-t, ctrl-d Убрать/добавить отступ в режиме вставки
&#171; Добавить отступ</p><blockquote><blockquote><p>Убрать отступ
Подсветка синтаксиса
:syntax on Включить подсветку
:syntax off Выключить подсветку
:set syntax=perl Установить режим подсветки</p></blockquote></blockquote><p>Вставить символ в начало большого количества подряд идущих строк:</p><p>Вариант 1</p><p>Use Ctrl+v to select the first column of text in the lines you want to comment.</p><p>Then hit &lsquo;I&rsquo; and type the text you want to insert.</p><p>Then hit &lsquo;Esc&rsquo;, wait 1 second and the inserted text will appear on every line.</p><p>Вариант 2
This replaces the beginning of each line with &ldquo;//":</p><p>:%s!^!//!</p><p>This replaces the beginning of each selected line (use visual mode to select) with &ldquo;//":</p><p>:&lsquo;&lt;,&lsquo;>s!^!//!</p><blockquote><p>What if you’ve forgot to give sudo when you’ve opened the /etc/group file as shown below? In this case, instead of coming out of the file (and loosing all > > your changes) and executing the vim command with sudo, you can do the following.
$ vim /etc/group
:w !sudo tee %
Note: “:w !sudo tee %” will save the file as root privilege, even if you didn’t use sudo command to open it.</p></blockquote><p>Использование стиля “подсветил — посмотрел — выполнил” совместно с визуальным режимом оказалось очень удобной практикой. Такое комбинирование стилей выделения используется при решении задач типа “в данной функции переименовать переменную foo в bar” и подобных. Такая (и подобные) задачи решаются последовательностью действий:</p><p>Подсвечиваем foo командой *</p><p>Переходим в режим визуального выделения и выделяем текущую функцию</p><p>Отдаем команду замены :’&lt;,’>s//bar/g</p><p>Символы ’&lt;,’>, означающие начало и конец текущего выделенного блока, и определяющие диапазон применения команды :s, Vim подставляет автоматически при отдаче любой команды из режима визуального выделения. Также опущен первый аргумент команды :s, т. к. набирать его нет необходимости — когда он опущен, Vim использует в качестве этого аргумента содержимое регистра текущего поиска. То есть именно то, что подсвечено желтым.</p><p>:g//t$ — скопировать строки, содержащие подсвеченное значение, в конец файла. Если, например, надо быстро понять, как глобальная переменная (sic! — а что делать, в legacy-коде они встречаются) используется в модуле.</p><p>:g//d — удалить строки, содержащие подсвеченное значение
:g!//d — удалить стрки, НЕ содержащие подсвеченного значения</p><p>Заменить каждое вхождение нескольких пустых строк на одну пустую строку (чтобы между параграфами стал одинаковый промежуток в одну линию):
:v/./,/./-j</p><p>Убрать пустые строки (в визуальном режиме)
:&lsquo;&lt;,&lsquo;>g/^$/d</p><p>Раздвинуть подряд идущие строки (обратное предыдущему действие, каждая строка станет параграфом)
Нужно при форматировании текста под 76 символов, из формата, как его сохраняет Word, когда каждый абзац становится строкой в текстовом файле.
:&lsquo;&lt;,&lsquo;>s/$/\r/g</p><p>быстро вставить текст при включенном autoindent (set ai) - борьба с &ldquo;лесенкой&rdquo;</p><p>:r !cat</p><p><a href=http://najomi.org/vim>источник</a></p><h2 id=выбрать-синтаксис-редактируемого-файла>Выбрать синтаксис редактируемого файла</h2><p>:set ft=ruby</p><h2 id=способы-перейти-в-режим-вставки>Способы перейти в режим вставки</h2><p>i - вставить текст слева от текущего
I - вставить текст в начало строки
a - вставить текст справа от текущего символа
A - вставить текст в конец текущей строки
o - создать новую строку под текущей
O - создать новую строку над текущей
C - заменить всё до конца строки
r - заменить 1 символ
3s - удалить 3 символа и перейти в режим вставки
ciW - заменить большое слово под курсором
ci&rdquo; - заменить текст между кавычками
ci( - заменить текст между круглыми скобками
gi - перейти к последнему месту, где производилось редактирование</p><h2 id=передвижение-по-тексту>Передвижение по тексту</h2><p>fx - Передвинуть курсор вперед к следующему вхождению символа х в текущей строке
tx - Передвинуть курсор вперед к следующему вхождению символа х в текущей строке и установить курсор перед символом x
Fx - Передвинуть курсор назад к предыдущему вхождению символа х в текущей строке
w - Передвинуть курсор вперед на одно слово
b - Передвинуть курсор назад на одно слово
0 - Передвинуть курсор на начало текущей строки
^ - Передвинуть курсор на первый символ в текущей строке
$ - Передвинуть курсор на конец текущей строки</p><ul><li><ul><li>начать поиск по слову под курсором
# - начать поиск по слову под курсором в обратном порядке
w - перейти к следующему слову
W - перейти к следующему большому слову (тому, что разделено пробелом)
b/e - перейти к началу/концу текущего слова
B/E - перейти к началу/концу текущего большого слова
gg/G - перейти в начало/конец файла
% - перейти к парной скобке
{/} - перейти к следующему/предыдущему параграфу
&lsquo;. - перейти к последнему месту, где производилось редактирование</li></ul></li></ul><h2 id=удаление-данных>Удаление данных</h2><p>4dd - удалить 4 строки
3x - удалить 3 символа
D - удалить от текущей позиции до конца строки</p><h2 id=способы-сложного-выделения-текста>Способы сложного выделения текста</h2><p>v% - когда курсор установлен на одной из скобок - выделит всё до её пары.
vib - выделить всё между двумя ближайшими к курсору круглыми скобками
viB - выделить всё между двумя ближайшими к курсору фигурными скобками
vi&rdquo; - выделить всё между двумя ближайшими двойными кавычками
vi&rsquo; - выделить всё между двумя ближайшими одинарными кавычками
ggVG - выделить весь файл
Ctrl+v - выделять прямоугольником</p><h2 id=заменить-все-вхождения-old-на-new>Заменить все вхождения &lsquo;old&rsquo; на &lsquo;new&rsquo;</h2><p>:%s/old/new/g</p><h2 id=заменить-все-вхождения-old-на-new-с-запросом-подтверждения>Заменить все вхождения &lsquo;old&rsquo; на &lsquo;new&rsquo; с запросом подтверждения</h2><p>:%s/old/new/gw</p><h2 id=удалить-все-строки-не-содержащие-string>Удалить все строки, не содержащие &lsquo;string&rsquo;</h2><p>:v/string/d</p><h2 id=удаление-всех-пустых-строк-в-vim>Удаление всех пустых строк в VIM</h2><p>:g/^$/d</p><h2 id=сокращения-для-быстрого-создания-закомментированных-участков-кода>Сокращения для быстрого создания закомментированных участков кода</h2><p>:ab #b /*************************************************<br>:ab #e *************************************************/</p><h2 id=заставить-вим-не-раскрывать-табы-при-редактировании-makefile>Заставить вим не раскрывать табы при редактировании makefile</h2><p>\ # vim: set tabstop=4 shiftwidth=4 noexpandtab:</p><h2 id=открыть-файл-но-предопределить-синтаксис-редактора>Открыть файл, но предопределить синтаксис редактора</h2><p>$ vim &ldquo;+set filetype=lisp&rdquo; file.rb</p><h2 id=отправить-весь-буфер-вима-в-grep>Отправить весь буфер вима в grep</h2><p>:%!grep data</p><h2 id=редактировать-последний-изменённый-файл>Редактировать последний изменённый файл</h2><p>$ vim <code>ls -t | head -n1</code></p><h2 id=убрать-символ-переноса-строки-m-в-файле-из-windows-двумя-способами-m-вводится-как-ctrl-v-ctrl-m>Убрать символ переноса строки ^M в файле из windows двумя способами. ^M вводится как Ctrl-V Ctrl-M.</h2><p>:set ff=unix
:w</p><p>:%s/^M//g</p><h2 id=заменить-foo-на-bar-в-строках-127-215>Заменить &ldquo;foo&rdquo; на &ldquo;bar&rdquo; в строках 127-215</h2><p>:127,215s/foo/bar</p><h2 id=с-текущей-строки-до-конца-файла-объеденить-все-строки-в-одну>С текущей строки до конца файла объеденить все строки в одну</h2><p>:.,$j</p><h2 id=оба-вида-записи-указывают-на-весь-файл-целиком>Оба вида записи указывают на весь файл целиком</h2><p>:1,j
:%</p><h2 id=начиная-с-текущей-удалить-в-следующих-21-ой-строках-те-что-содержат-слово-foo>Начиная с текущей, удалить в следующих 21-ой строках те, что содержат слово foo</h2><p>:.,+21g/foo/d</p><h2 id=начиная-с-текущего-места-и-до-конца-файла-удалить-все-строки-что-не-содержат-bar>Начиная с текущего места и до конца файла удалить все строки что НЕ содержат &ldquo;bar&rdquo;</h2><p>:.,$v/bar/d</p><h2 id=все-строки-что-содержат-foo-перенести-в-конец-файла-в-том-же-порядке-в-каком-они-встречаются-по-документу>Все строки, что содержат &ldquo;foo&rdquo; перенести в конец файла, в том же порядке, в каком они встречаются по документу</h2><blockquote><p>:%g/foo/m$</p></blockquote><h2 id=все-строки-что-начинаются-с-пробела-объединить-с-предыдущими>Все строки, что начинаются с пробела, объединить с предыдущими</h2><blockquote><p>:%g/^ /-1j</p></blockquote><h2 id=во-всех-строках-содержащих-foo-заменить-bar-на-zzz>Во всех строках содержащих &ldquo;foo&rdquo;, заменить &ldquo;bar&rdquo; на &ldquo;zzz&rdquo;</h2><p>:%g/foo/s/bar/zzz/g</p><h2 id=между-метками-a-и-b-объединить-строки-что-содержат-foo-с-теми-что-идут-после-них>Между метками &lsquo;a&rsquo; и &lsquo;b&rsquo;, объединить строки, что содержат &lsquo;foo&rsquo; с теми что идут после них.</h2><blockquote><p>:&lsquo;a,&lsquo;bg/foo/j</p></blockquote><h2 id=вставка-содержимого-из-другого-места>Вставка содержимого из другого места</h2><p>:r file.txt - прочитать и вставить содержимое файла &lsquo;file.txt&rsquo; в место под курсором
:0r file.txt - вставить файл в начало документа
:$r file.txt - вставить файл в конец документа
:r !uptime - вставить вывод команды в место под курсором</p><h2 id=дописать-содержимое-буфера-в-конец-другого-файла>Дописать содержимое буфера в конец другого файла</h2><p>:w &#187;~/file.txt</p><h2 id=отсортировать-весь-файл-с-помощью-sort>Отсортировать весь файл с помощью sort</h2><blockquote><p>:%!sort</p></blockquote><h2 id=увеличитьуменьшить-число-под-курсором-на-1>увеличить/уменьшить число под курсором на 1</h2><blockquote><p>Ctrl+a
Ctrl+x</p></blockquote><h2 id=изменить-регистр-символа-под-курсором-на-противоположный>Изменить регистр символа под курсором на противоположный</h2><blockquote><p>~</p></blockquote><h2 id=объединить-текущую-строку-со-следующей>Объединить текущую строку со следующей</h2><blockquote><p>J</p></blockquote><h2 id=в-режиме-вставки-комбинация-ctrlr-позволяет-вставлять-некоторые-полезные-вещи>В режиме вставки, комбинация Ctrl+R позволяет вставлять некоторые полезные вещи:</h2><p>" - последний удалённый/скопированный текст
% - текущее имя файла</p><ul><li><ul><li>содержимое буфера обмена (X11: primary selection)</li></ul></li></ul><ul><li><ul><li>содержимое буфера обмена
/ - последний запрос поиска
: - последняя команда
. - последний вставленный текст</li></ul></li></ul><ul><li><ul><li>последний маленький удалённый текст (меньше строки)
=5*5 - вставит 25. Мини калькулятор</li></ul></li></ul><h2 id=дополнить-слово-в-режиме-вставки>Дополнить слово в режиме вставки</h2><p>Ctrl+p
Ctrl+n</p><h2 id=путешествие-по-результатам-поиска>Путешествие по результатам поиска.</h2><p>Переход будет осуществляться по местам, которые были указаны явно: - поиск с помощью / - переход gg, G, [\d]G Так же будут открываться другие файлы, где осуществлялись подобные действия.</p><p>Ctrl+o
Ctrl+i</p><h2 id=работа-с-сессиями>Работа с сессиями</h2><h3 id=сохраняем>Сохраняем</h3><p>:mks sessionname
" или принудительно:
:mks! sessionname</p><h3 id=загружаем>Загружаем</h3><p>$ vim -S sessionname</p><h2 id=работа-со-встроенным-файловым-менеджером-вызвать-его-можно-командой-explore-или-попытавшись-открыть-на-редактирование-каталог-sp->Работа со встроенным файловым менеджером. Вызвать его можно командой :Explore или попытавшись открыть на редактирование каталог :sp ./</h2><ul><li><ul><li>перейти на каталог выше
mf - пометить файл
D - удалить помеченые файлы. Удалит файл под курсором, если помеченых нет
R - переименовать файл под курсором
d - создать новый каталог
% - создать новый файл</li></ul></li></ul><h2 id=отправить-текущий-файл-на-исполнение-питоном>отправить текущий файл на исполнение питоном</h2><p>:!python %</p><h2 id=работа-с-несколькими-окнами>работа с несколькими окнами</h2><p>Ctrl+wv - разбить окно по вертикали
Ctrl+ws - разбить окно по горизонтали
Ctrl+ww - переключиться между окнами
Ctrl+w{h,j,k,l} - перейти к окну левее, ниже, выше, правее
Ctrl+w{&lt;,>,+,-} - изменить размеры текущего окна
Ctrl+wq - закрыть окно</p><h2 id=проставить-отступы-для-всего-документа>Проставить отступы для всего документа</h2><p>gg=G</p><p>Для того чтобы это работало - надо добавить в .vimrc следующую строку:
filetype plugin indent on</p><h2 id=копируем-содержимое-строк-вышениже-курсора-не-покидая-режима-вставки>Копируем содержимое строк выше/ниже курсора, не покидая режима вставки</h2><p>Ctrl+y - вставить символ над курсором
Ctrl+e - вставить символ под курсором</p><h2 id=отбросить-правки-до-последнего-сохранённого-состояния>Отбросить правки до последнего сохранённого состояния</h2><p>:e!</p><h2 id=heading></h2><p>Q - войти в ex-режим
:vi - выйти из ex-режима</p><h2 id=удалить-все-строки-что-не-содержат-слова-git>Удалить все строки что не содержат слова &ldquo;git&rdquo;</h2><p>:v/git/d
:g!/git/d</p><h2 id=для-всех-строк-что-содержат-слово-git-добавить-в-начало--и-в-конец--после-слова-norm---можно-написать-любую-vim-команду-в-данном-случае---i---вставить-в-начало-строки-a---в-конец>Для всех строк, что содержат слово git добавить в начало &lsquo;&#187;&rsquo; и в конец &lsquo;&#171;&rsquo;. После слова norm - можно написать любую vim команду. В данном случае - &lsquo;I&rsquo; - вставить в начало строки, &lsquo;A&rsquo; - в конец.</h2><p>:g/git/norm I&#187;ctrl+vescA&#171;</p><p>Файл настройки: ~/.vimrc
Можно редактировать файлы через сеть, например
:e &lt;scp|ftp|ftps>://user@host/path/to/the/file.txt
:Ex или :e ./ - файловый менеджер</p><p>== Основы ==
hjkl перемещение в разные стороны
i режим вставки
I добавление в начало строки
a режим добавления
A добавление в конец строки
o добавить строку сразу за текущей
O добавить строку перед текущей
R писать поверх имеющегося текста
u, :u[ndo] отмена предыдущего действия (undo)
CTR-R, :red[o] отмена отмены предыдущего действия (redo)
dd вырезать (удалить) строку
cc удалить и начать редактирование
yy копировать строку
p вставить из буфера обмена
d удалить n+1 строку
y скопировать n+1 строку
ESC перейти в режим просмотра
DEL удалить следующий символ
: перейти на строку #n
% перейти к парной скобке
:e **/filename.c редактировать файл (с поиском по имени)
:w [fname] записать изменения
:wa сохранить изменения во всех файлах
:q выйти из редактора
:q! выйти из редактора, не сохраняя изменения
:color выбор цветовой схемы. цветвые схемы:
/usr/local/share/vim/vim72/colors/<em>.vim
:pwd текущий каталог
:cd [path] перейти в другой каталог
:!команда выполнить команду - man, git, и так далее
стрелочками веерх и вниз можно автодополнять
команды и искать по истории
CTR+p или CTR+n автоматическое дополнение текста
(в режиме редактирования)
CTR+r,=, вставить выражение, например 5</em>2 - 3
(в режиме редактирования)
CTR+u, CTR+d Page Up / Page Down
CTR+y, CTR+e Перемотка вверх/вниз без движения курсора</p><p>== Подсветка синтаксиса ==
:syntax on включить подсветку
:syntax off выключить подсветку (по умолчанию)</p><p>== Перенос строк ==
:set wrap разрешить word wrap (по умолчанию)
:set nowrap запретить word wrap</p><p>== Печать ==
:ha[rdcopy] распечатать документ
:set printoptions=duplex:off отключить двустороннюю печать</p><p>== Сворачивание ==
zc свернуть блок
zo развернуть блок
zM закрыть все блоки
zR открыть все блоки
za инвертирование
zf см :set foldmethod=manual
:set foldenable включить свoрачивание
:set foldmethod=syntax сворачивание на основе синтаксиса
:set foldmethod=indent сворачивание на основе отступов
:set foldmethod=manual выделяем участок с помощью v и говорим zf
:set foldmethod=marker сворачивание на основе маркеров в тексте
:set foldmarker=bigin,end задаем маркеры начала и конца блока</p><p>== Маркеры ==
ma установить локальный маркер a
mB установить глобальный маркер B
<code>c перейти к локальному маркеру c</code>0 вернуться на позицию, на которой закончили
работу при закрытии vim
:marks просмотр маркеров
set viminfo='1000,f1 маркеры пишутся в ~/.viminfo, восстанавливаясь
при следующем запуске vim. маркер " хранит
последнюю позицию курсора в файле
== Сессии ==
mksession file.session сохранить текущую сессию
source file.session восстановить ранее сохраненную сессию</p><p>== Макросы ==
qa записать макрос с именем a
q в режиме записи макроса: закончить запись
@a выполнить макрос с именем a
@@ повторить последний макрос</p><p>== Регистры ==
&ldquo;ayy скопировать строку в регистр a
&ldquo;bdd вырезать строку и поместить в регистр b
&ldquo;С2d вырезать три строки и дописать в конец
регистра C
:reg [name1][name2][&mldr;] просмотреть содержимое регистров</p><p>== Выделение ==
v + hjkl выделение текста
SHIFT + v выделить строку
CTR + v выделение прямоугольника
p вставить
y копировать
d удалить
gu к нижнему регистру
gU к верхнему регистру</p><p>== Отступы ==
[#]> сдвинуть выделенное вправо
[#]&lt; сдвинуть выделенное влево
[#]&#187; сдвинуть строку вправо
[#]&#171; сдвинуть строку влево
set tabstop=# для табуляции используется # пробелов
set shiftwidth=# в командах отступа используется # пробелов
set [no]expandtab заменять ли табуляцию на соответствующее
число пробелов</p><p>== Поиск и замена в файле ==
/Выражение поиск выражения в файле
\cВыражение поиск без учета регистра
n следующее совпадение
N предыдущее совпадение
:%s/foo/bar/gi замена строк, см <a href=http://eax.me/regular-expr/>http://eax.me/regular-expr/</a></p><p>== Поиск по всему проекту ==
:vimgrep /EXPR/ **/*.c поиск по регулярному выражению
:copen показать все найденные места
:close скрыть все найденные места
:cn переход к следующему результату
:cp переход к предыдущему результату</p><p>== Нумерация строк ==
:set number включить нумерацию строк
:set nonumber отключить нумерацию строк</p><p>== Работа с вкладками (a.k.a табами) ==
:tabnew [fname] создать таб
:tabs вывести список табов
:tabn следующий таб
:tabp предыдущий таб
gt перейти на таб #n
gt следующий таб
gT предыдущий таб
:tabm +1 переместить таб вперед на одну позицию
:tabm -1 переместить таб назад на одну позицию
:tabm 2 переместить таб на заданную позицию
(нумерация начинается с нуля)</p><p>== Работа с окнами ==
:split горизонтальное разбиение
:vsplit вертикальное разбиение
Ctr+W, затем
с закрыть окно
+- изменение высоты текущего окна
&lt;> изменение ширины текущего окна
= установить равный размер окон
hjkl или стрелочки перемещение между окнами</p><p>== Проверка орфографии ==
mkdir -p ~/.vim/spell
cd ~/.vim/spell
wget <a href=http://ftp.vim.org/vim/runtime/spell/ru.koi8-r.sug>http://ftp.vim.org/vim/runtime/spell/ru.koi8-r.sug</a>
wget <a href=http://ftp.vim.org/vim/runtime/spell/ru.koi8-r.spl>http://ftp.vim.org/vim/runtime/spell/ru.koi8-r.spl</a>
wget <a href=http://ftp.vim.org/vim/runtime/spell/en.ascii.sug>http://ftp.vim.org/vim/runtime/spell/en.ascii.sug</a>
wget <a href=http://ftp.vim.org/vim/runtime/spell/en.ascii.spl>http://ftp.vim.org/vim/runtime/spell/en.ascii.spl</a></p><p>:set spell spelllang=ru,en включить проверку орфографии
:set nospell выключить проверку орфографии
]s следующее слово с ошибкой
[s предыдущее слово с ошибкой
z= замена слова на альтернативу из списка
zg good word
zw wrong word
zG ignore word</p><p>== Работа с кодировкой ==
e ++enc=&lt;имя кодировки> Редактирование файла в ??? кодировке
w ++enc=&lt;имя кодировки> Сохранить файл в новой кодировке
set fileencodings=utf-8,koi8-r Список автоматически определяемых
кодировок в порядке убывания
приоритета</p><p>== Другое ==
:set [no]wildmenu При авто-дополнении в командной строке над
ней выводятся возможные варианты
:set list Отображать табуляцию и переводы строк
q: История команд
. Повторение последней команды</p><p>Есть еще вариант перехода на нужную строку. В нормальном режиме набрать
G</p><p>Сначала номер строки (номер отображается в строке статуса), потом сразу нажать &ldquo;G&rdquo;.</p><p>=== Ещё немного полезностей ===</p><p>vip - выделить параграф</p><p>viw - выделить слово</p><p>Shift+v или 0v$ - выделить строку</p><p>^v$ - выделить строку, начиная с первого непробельного символа</p><p>vi( - выделить всё между ближайшими круглыми скобками (аналогично &lsquo;vi[&rsquo; и &lsquo;vi{&rsquo; для квадратных и фигурных скобок)</p><p>va( - выделить всё между ближайшими круглыми скобками, включая сами скобки</p><p>v2j - выделить на две строки вниз</p><p>dip - вырезать параграф</p><p>di( - вырезать содержимое круглых скобок</p><p>da( - вырезать содержимое круглых скобок и сами скобки</p><p>y2y - скопировать две строки</p><p>yy - скопировать строку</p><p>yiw - скопировать слово</p><p>p - вставить после курсора</p><p>[p - вставить перед курсором</p><p>xp - поменять две буквы местами</p><p>vt, - выделить всё до ближайшей запятой</p><p>Ctrl+G - номер текущей строки, общее число строк в файле и его имя</p><p>N,M ya - копировать в буфер обмена строки с N до M включительно (потом их можно вставить в нужном месте той же &ldquo;p&rdquo;)</p><p>Ndd - удалить N строк (любые удалённые строки попадают в буфер обмена)</p></div></main><footer><p class="copyright text-muted">Rafael 2020</p></footer></body></html>